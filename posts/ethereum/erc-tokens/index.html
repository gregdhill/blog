<!DOCTYPE html>
<html lang="en"><head>
	<meta charset="UTF-8">
	<meta name="description" content="Interested in Blockchains, Cryptography and Distributed Systems.">
	<meta name="keywords" content="computer, security, ethical hacker, researcher, inventor, abertay, dundee, edinburgh, machine learning, mathematics, cryptography, blockchains, reverse engineering, linux, programming, scotland, greg hill">
	<meta name="author" content="Gregory Hill">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Gregory Hill</title>
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/style.css" rel="stylesheet">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
	<link rel="icon" type="image/png" href="img/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="img/favicon-16x16.png" sizes="16x16">
	<link rel="manifest" href="/img/manifest.json">
	<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="/img/favicon.ico">
	<meta name="msapplication-config" content="/img/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
</head><body>
    <main><div class="post">
    <div class="post-info">
        
            Oct 5, 2019
            · 644 words
            · 4 minute read
        
    </div>

    <h1 class="post-title">
        ERC Token Standards
    </h1>

    <div class="post-tags"><a class="tag" href=/tags/ethereum/>#ethereum</a><a class="tag" href=/tags/solidity/>#solidity</a></div>

    <p>You may be familiar with the concept of a Request for Comments (RFC) from a body such as the Internet Engineering
Task Force (IETF). They are just technical documents that describe the specifications for a particular technology -
<code>HTTP/1.1</code> is described by <a href="https://www.ietf.org/rfc/rfc2616.txt">RFC-2616</a> for instance. Application level standards
in the Ethereum ecosystem are thus named accordingly, forming one possible part of an Ethereum Improvement Proposal (EIP).
For more details on this, check out <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1.md">EIP-1</a>.</p>
<h2 id="erc-20">ERC-20</h2>
<p><a href="https://eips.ethereum.org/EIPS/eip-20">ERC-20</a> is one such standard, named simply because it was the
<a href="https://github.com/ethereum/eips/issues/20">twentieth issue</a> on GitHub. It defines six
<a href="https://solidity.readthedocs.io/en/v0.4.21/contracts.html#functions">functions</a> that should be implemented
and two <a href="https://solidity.readthedocs.io/en/v0.4.21/contracts.html#events">events</a> that should be triggered
in order for the smart contract to be considered compliant.</p>
<h3 id="functions">Functions</h3>
<div class="highlight"><pre class="chroma"><code class="language-solidity" data-lang="solidity"><span class="c1">// Get the total number of tokens possible:
</span><span class="c1"></span><span class="kd">function</span> <span class="n">totalSupply</span><span class="p">()</span> <span class="kr">constant</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span> <span class="n">totalSupply</span><span class="p">)</span>

<span class="c1">// Get the target account&#39;s balance:
</span><span class="c1"></span><span class="kd">function</span> <span class="n">balanceOf</span><span class="p">(</span><span class="kt">address</span> <span class="n">_owner</span><span class="p">)</span> <span class="kr">constant</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span> <span class="nb">balance</span><span class="p">)</span>

<span class="c1">// Send token to target account:
</span><span class="c1"></span><span class="kd">function</span> <span class="nb">transfer</span><span class="p">(</span><span class="kt">address</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">)</span>

<span class="c1">// Send token to target account from authorized account:
</span><span class="c1"></span><span class="kd">function</span> <span class="n">transferFrom</span><span class="p">(</span><span class="kt">address</span> <span class="n">_from</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">)</span>

<span class="c1">// Allow the target account to withdraw up to value:
</span><span class="c1"></span><span class="kd">function</span> <span class="n">approve</span><span class="p">(</span><span class="kt">address</span> <span class="n">_spender</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">)</span>

<span class="c1">// Amount approved account is allowed to spend:
</span><span class="c1"></span><span class="kd">function</span> <span class="n">allowance</span><span class="p">(</span><span class="kt">address</span> <span class="n">_owner</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_spender</span><span class="p">)</span> <span class="kr">constant</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span> <span class="n">remaining</span><span class="p">)</span>

</code></pre></div><h3 id="events">Events</h3>
<div class="highlight"><pre class="chroma"><code class="language-solidity" data-lang="solidity"><span class="c1">// Trigger on token transfer:
</span><span class="c1"></span><span class="kd">event</span> <span class="n">Transfer</span><span class="p">(</span><span class="kt">address</span> <span class="kr">indexed</span> <span class="n">_from</span><span class="p">,</span> <span class="kt">address</span> <span class="kr">indexed</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">)</span>

<span class="c1">// Trigger when account is approved:
</span><span class="c1"></span><span class="kd">event</span> <span class="n">Approval</span><span class="p">(</span><span class="kt">address</span> <span class="kr">indexed</span> <span class="n">_owner</span><span class="p">,</span> <span class="kt">address</span> <span class="kr">indexed</span> <span class="n">_spender</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">)</span>
</code></pre></div><h3 id="example">Example</h3>
<p>Before reading ahead you should first be aware of
<a href="https://solidity.readthedocs.io/en/v0.5.3/contracts.html#abstract-contracts">abstract</a> contracts and
<a href="https://solidity.readthedocs.io/en/v0.5.3/contracts.html#interfaces">interfaces</a> in Solidity.
Both concepts allow for a level of generality in the child implementation, with assurance that the
inherited definitions will be preserved. The <a href="https://github.com/OpenZeppelin/openzeppelin-contracts">smart contract library</a>
by OpenZeppelin details many such APIs for developers to reuse. In particular,
<a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/IERC20.sol">IERC20.sol</a>
contains all definitions for ERC-20. We can import this interface and assert that our contract implements it:</p>
<div class="highlight"><pre class="chroma"><code class="language-solidity" data-lang="solidity"><span class="kr">pragma solidity</span> <span class="o">^</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="kn">import</span> <span class="s">&#34;./IERC20.sol&#34;</span><span class="p">;</span>

<span class="kd">contract</span> <span class="n">Token</span> <span class="kr">is</span> <span class="n">IERC20</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="n">supply</span><span class="p">;</span>
    <span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="n">balances</span><span class="p">;</span>
    <span class="n">constructor</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>  
        <span class="n">supply</span> <span class="o">=</span> <span class="mi">1000000000</span><span class="p">;</span>  
        <span class="n">balances</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="nb">sender</span><span class="p">]</span> <span class="o">=</span> <span class="n">supply</span><span class="p">;</span>  
        <span class="n">emit</span> <span class="n">Transfer</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="nb">sender</span><span class="p">,</span> <span class="nb">msg</span><span class="p">.</span><span class="nb">sender</span><span class="p">,</span> <span class="n">supply</span><span class="p">);</span>  
    <span class="p">}</span>
    
    <span class="kd">function</span> <span class="n">totalSupply</span><span class="p">()</span> <span class="kr">external</span> <span class="kr">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">supply</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">balanceOf</span><span class="p">(</span><span class="kt">address</span> <span class="n">account</span><span class="p">)</span> <span class="kr">external</span> <span class="kr">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">balances</span><span class="p">[</span><span class="n">account</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nb">transfer</span><span class="p">(</span><span class="kt">address</span> <span class="n">recipient</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">)</span> <span class="kr">external</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">balances</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="nb">sender</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">balances</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="nb">sender</span><span class="p">]</span> <span class="o">-=</span> <span class="n">amount</span><span class="p">;</span>
            <span class="n">balances</span><span class="p">[</span><span class="n">recipient</span><span class="p">]</span> <span class="o">+=</span> <span class="n">amount</span><span class="p">;</span>
            <span class="n">emit</span> <span class="n">Transfer</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="nb">sender</span><span class="p">,</span> <span class="n">recipient</span><span class="p">,</span> <span class="n">amount</span><span class="p">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">allowance</span><span class="p">(</span><span class="kt">address</span> <span class="n">owner</span><span class="p">,</span> <span class="kt">address</span> <span class="n">spender</span><span class="p">)</span> <span class="kr">external</span> <span class="kr">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">approve</span><span class="p">(</span><span class="kt">address</span> <span class="n">spender</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">)</span> <span class="kr">external</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="kd">function</span> <span class="n">transferFrom</span><span class="p">(</span><span class="kt">address</span> <span class="nb">sender</span><span class="p">,</span> <span class="kt">address</span> <span class="n">recipient</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">)</span> <span class="kr">external</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="makerdao">MakerDAO</h3>
<p>I had previously mentioned this in my post on <a href="../dao/">Decentralized Autonomous Organizations (DAO)</a>,
MakerDAO is responsible for the stablecoin named Dai. To mint this token, a user must lock up their Ether
in a Collateralized Debt Position (CDP). This accrues interest over time (known as a stability fee) and all
Dai will need to be paid back before the CDP can be unlocked. Without diving too deep into the economics,
Maker has integrated a number of techniques to ensure the value of a single Dai is equivalent to the USD.
The whole system is open-source, and is in fact ERC-20 compliant as shown <a href="https://github.com/makerdao/dss/blob/master/src/dai.sol">here</a>.</p>
<h2 id="erc-721">ERC-721</h2>
<p>To understand why <a href="https://github.com/ethereum/EIPs/issues/721">ERC-721</a> exists, we need to understand the concept of
fungibility. In essence, something is fungible if it is completely interchangeable. For example, ERC-20 is fungible
because it&rsquo;s impossible to distinguish individual tokens, like gold - where one unit can be wholly replaced with another
with no loss of value. Now, let&rsquo;s imagine we wanted to build a virtual game in which players have unique assets.
You may have heard of the game <a href="https://www.cryptokitties.co/">CryptoKitties</a> for instance, where no two cats are the same.
This is built atop ERC-721, a standard for the Non-Fungible Token (NFT) - see the interface defined by
<a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/IERC721.sol">OpenZeppelin</a>.</p>

</div></main>
</body>

</html>